<nz-card
    [nzCover]="coverTemplate"
    [nzActions]="[actionSetting, actionEdit, actionEllipsis]"
    [nzHoverable]="true"
>
    <nz-card-meta
        [nzTitle]="event.title"
        [nzDescription]="event.subtitle ?? null"
        [nzAvatar]="avatarTemplate"
    ></nz-card-meta>
</nz-card>
<ng-template #avatarTemplate>
    <!-- <nz-avatar-group>
        <nz-avatar
            nzIcon="user"
            nzSrc="//zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"
        ></nz-avatar>
    </nz-avatar-group> -->
</ng-template>
<ng-template #coverTemplate>
    <img
        class="banner-image"
        [alt]="(event.bannerUri ? event.title : 'Default') + ' Event Banner'"
        [src]="
            event.bannerUri ??
            'https://gw.alipayobjects.com/zos/rmsportal/JiqGstEfoWAOHiTxclqi.png'
        "
    />
</ng-template>
<ng-template #actionSetting>
    <span nz-tooltip nzTooltipTitle="Click to open event page in a new tab">
        <a
            [href]="
                event.eventLink.startsWith('http')
                    ? event.eventLink
                    : 'https://' + event.eventLink
            "
            rel="noopener noreferrer"
            target="_blank"
        >
            <span nz-icon nzType="link"></span>
        </a>
    </span>
</ng-template>
<ng-template #actionEdit>
    <span nz-icon nzType="edit"></span>
</ng-template>
<ng-template #actionEllipsis>
    <div>
        @if (event.isUnconfirmed || !event.isWalkInAvailable) { @if(event.isUnconfirmed)
        {
        <span
            nz-icon
            nzType="question-circle"
            nz-tooltip
            nzTooltipTitle="Event is not confirmed"
        ></span>
        } @if(!event.isWalkInAvailable) {
        <span
            nz-icon
            nzType="calendar"
            nz-tooltip
            nzTooltipTitle="You must register to join. Walk-ins not accepted."
        ></span>
        } } @else {
        <span
            nz-icon
            [nzType]="'check-circle'"
            [nzTheme]="'twotone'"
            [nzTwotoneColor]="'#52c41a'"
            nz-tooltip
            nzTooltipTitle="Event is both confirmed & accepts walk-ins."
        ></span>
        }
    </div>
</ng-template>
